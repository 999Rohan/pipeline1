pipeline {
    agent none

    environment {
        BRANCH = 'main'
        GIT_REPO = 'https://github.com/999Rohan/pipeline1.git'
    }

    stages {
            stage('BUILd') {
                    agent any
                    environment {
                        BUILD_ENV = 'This_is_for_build_stage_only'
                    }
                    steps {
                        git branch: $BRANCH, url: $GIT_REPO
                        sh '''
                            #!/bin/bash
                            ls
                            pwd
                            echo "This is a BUILD stage"
                            sleep 5
                        '''
                    }   
            }    
            stage('DEPLOY') {
                    agent { label 'master' }
                    steps {
                        echo "This is a DEPLOY stage"
                        sh 'sleep 5'  
                    } 
            }
            stage('TESTING1') {
                        agent { label 'node2' }
                            steps {
                                sh 'echo "This is a TESTING1 stage"'
                                sh 'sleep 5'
                            }     
            }
            stage('TESTING2') {
                    agent { label 'node3' }
                            steps {
                                sh '''
                                echo "This is a TESTING2 stage" 
                                sleep 5
                                '''    
                            }    
            }     
    }
}